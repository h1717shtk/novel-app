<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä¸€æ–‡é€†ç®—å°èª¬ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Zen+Kaku+Gothic+New:wght@400;500;700&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['"Noto Serif JP"', 'serif'],
            sans: ['"Zen Kaku Gothic New"', 'sans-serif'],
          },
          colors: {
            ink: '#1a1a2e',
            parchment: '#faf8f0',
            accent: '#e94560',
            deep: '#16213e',
            gold: '#d4a574',
          },
          animation: {
            'fade-in': 'fadeIn 0.6s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
            'quill': 'quill 1.5s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            quill: {
              '0%, 100%': { transform: 'rotate(-5deg)' },
              '50%': { transform: 'rotate(5deg)' },
            },
          },
        },
      },
    };
  </script>
  <style>
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
    }
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .glass-light {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }
    textarea:focus, input:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(212, 165, 116, 0.4);
    }
    .pattern-card {
      transition: all 0.3s ease;
    }
    .pattern-card:hover {
      transform: translateY(-2px);
    }
    .pattern-card.selected {
      border-color: #d4a574;
      background: rgba(212, 165, 116, 0.1);
      box-shadow: 0 0 20px rgba(212, 165, 116, 0.15);
    }
    .prompt-box {
      font-family: 'Noto Serif JP', serif;
      line-height: 1.9;
      letter-spacing: 0.03em;
    }
    /* Scrollbar styling */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 3px; }
    ::-webkit-scrollbar-thumb { background: rgba(212,165,116,0.3); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(212,165,116,0.5); }
  </style>
</head>
<body class="font-sans text-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // --- Pattern definitions ---
    const PATTERNS = [
      { id: 'emotional', label: 'æ„Ÿå‹•ç³»', icon: 'ğŸ’§', desc: 'å¿ƒã‚’æºã•ã¶ã‚‹æ„Ÿå‹•ã®ç‰©èª' },
      { id: 'twist', label: 'ãƒ‰ãƒ³ãƒ‡ãƒ³è¿”ã—ç³»', icon: 'ğŸ”„', desc: 'äºˆæƒ³ã‚’è¦†ã™è¡æ’ƒã®å±•é–‹' },
      { id: 'horror', label: 'ãƒ›ãƒ©ãƒ¼ç³»', icon: 'ğŸ‘»', desc: 'èƒŒç­‹ãŒå‡ã‚‹ææ€–ã®ç‰©èª' },
      { id: 'comedy', label: 'ã‚³ãƒ¡ãƒ‡ã‚£ç³»', icon: 'ğŸ˜‚', desc: 'æ€ã‚ãšç¬‘ãˆã‚‹æ¥½ã—ã„ç‰©èª' },
      { id: 'mystery', label: 'ãƒŸã‚¹ãƒ†ãƒªãƒ¼ç³»', icon: 'ğŸ”', desc: 'è¬ãŒè¬ã‚’å‘¼ã¶æ¨ç†ã®ç‰©èª' },
    ];

    const WORD_COUNTS = [
      { value: 1000, label: '1,000æ–‡å­—', desc: 'ã‚·ãƒ§ãƒ¼ãƒˆã‚·ãƒ§ãƒ¼ãƒˆ' },
      { value: 2000, label: '2,000æ–‡å­—', desc: 'çŸ­ç·¨' },
      { value: 3000, label: '3,000æ–‡å­—', desc: 'èª­ã¿å¿œãˆã‚ã‚Š' },
    ];

    // --- Build prompt ---
    function buildPrompt(lastSentence, pattern, wordCount) {
      const patternMap = {
        emotional: 'æ„Ÿå‹•çš„ã§å¿ƒã‚’æºã•ã¶ã‚‹',
        twist: 'æœ€å¾Œã«ãƒ‰ãƒ³ãƒ‡ãƒ³è¿”ã—ãŒã‚ã‚‹é©šãã®',
        horror: 'èƒŒç­‹ãŒå‡ã‚‹ã‚ˆã†ãªãƒ›ãƒ©ãƒ¼ã®',
        comedy: 'æ€ã‚ãšç¬‘ã£ã¦ã—ã¾ã†ã‚³ãƒ¡ãƒ‡ã‚£ã®',
        mystery: 'è¬ãŒè§£ãæ˜ã‹ã•ã‚Œã‚‹ãƒŸã‚¹ãƒ†ãƒªãƒ¼ã®',
      };
      const style = patternMap[pattern] || 'æ„Ÿå‹•çš„ãª';
      const lower = Math.round(wordCount * 0.9);
      const upper = Math.round(wordCount * 1.1);

      return `ã‚ãªãŸã¯ãƒ—ãƒ­ã®å°èª¬å®¶ã§ã™ã€‚ä»¥ä¸‹ã®æ¡ä»¶ã§çŸ­ç·¨å°èª¬ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚

ã€æœ€ã‚‚é‡è¦ãªæ¡ä»¶ã€‘
ã“ã®ä¸€æ–‡ã§ã€Œå¿…ãšã€ç‰©èªã‚’çµ‚ãˆã¦ãã ã•ã„ï¼š
ã€Œ${lastSentence}ã€

ã€ã‚¸ãƒ£ãƒ³ãƒ«ã€‘
${style}ç‰©èª

ã€æ–‡å­—æ•°ã€‘
${lower}ã€œ${upper}æ–‡å­—ç¨‹åº¦

ã€åŸ·ç­†ãƒ«ãƒ¼ãƒ«ã€‘
1. ç‰©èªã®æœ€å¾Œã®ä¸€æ–‡ã¯ã€ä¸Šè¨˜ã®ã€Œå¿…ãšçµ‚ãˆã‚‹ä¸€æ–‡ã€ã‚’ãã®ã¾ã¾ä½¿ã£ã¦ãã ã•ã„ã€‚ä¸€å­—ä¸€å¥å¤‰ãˆãªã„ã§ãã ã•ã„ã€‚
2. ãã®çµæœ«ã«å‘ã‹ã£ã¦è‡ªç„¶ã«æµã‚Œã‚‹ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’é€†ç®—ã—ã¦æ§‹æˆã—ã¦ãã ã•ã„ã€‚
3. å†’é ­ã‹ã‚‰çµæœ«ã¾ã§ã€èª­è€…ã‚’å¼•ãè¾¼ã‚€å±•é–‹ã«ã—ã¦ãã ã•ã„ã€‚
4. ç™»å ´äººç‰©ã«é­…åŠ›ã‚’æŒãŸã›ã€èª­è€…ãŒæ„Ÿæƒ…ç§»å…¥ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚
5. æœ€å¾Œã®ä¸€æ–‡ãŒæœ€å¤§é™ã«åŠ¹æœçš„ã«éŸ¿ãã‚ˆã†ã€ä¼ç·šã‚„å±•é–‹ã‚’å·¥å¤«ã—ã¦ãã ã•ã„ã€‚

ã€å‡ºåŠ›å½¢å¼ã€‘
- ã‚¿ã‚¤ãƒˆãƒ«ã¯ä¸è¦ã§ã™ã€‚æœ¬æ–‡ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
- æ®µè½ã®åŒºåˆ‡ã‚Šã«ã¯ç©ºè¡Œã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
- æœ€å¾Œã®ä¸€æ–‡ã€Œ${lastSentence}ã€ã§å¿…ãšçµ‚ã‚ã£ã¦ãã ã•ã„ã€‚`;
    }

    // --- Components ---

    function Header() {
      return (
        <header className="text-center py-8 md:py-12 animate-fade-in">
          <div className="text-5xl md:text-6xl mb-4 animate-quill inline-block">ğŸª¶</div>
          <h1 className="text-3xl md:text-4xl font-bold font-serif bg-gradient-to-r from-gold to-amber-300 bg-clip-text text-transparent">
            ä¸€æ–‡é€†ç®—å°èª¬
          </h1>
          <p className="text-white/50 mt-3 text-sm md:text-base">
            æœ€å¾Œã®ä¸€æ–‡ã‹ã‚‰ã€ç‰©èªãŒå§‹ã¾ã‚‹
          </p>
          <p className="text-white/30 mt-1 text-xs">
            AIã«æ¸¡ã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™
          </p>
        </header>
      );
    }

    function PatternSelector({ selected, onSelect }) {
      return (
        <div className="mb-6 animate-slide-up" style={{ animationDelay: '0.1s' }}>
          <label className="block text-gold text-sm font-medium mb-3">
            ğŸ“– ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
          </label>
          <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
            {PATTERNS.map(p => (
              <button
                key={p.id}
                onClick={() => onSelect(p.id)}
                className={`pattern-card glass rounded-xl p-3 text-center border-2 transition-all ${
                  selected === p.id
                    ? 'selected border-gold'
                    : 'border-transparent hover:border-white/20'
                }`}
              >
                <div className="text-2xl mb-1">{p.icon}</div>
                <div className="text-sm font-medium">{p.label}</div>
                <div className="text-xs text-white/40 mt-1 hidden sm:block">{p.desc}</div>
              </button>
            ))}
          </div>
        </div>
      );
    }

    function WordCountSelector({ selected, onSelect }) {
      return (
        <div className="mb-6 animate-slide-up" style={{ animationDelay: '0.2s' }}>
          <label className="block text-gold text-sm font-medium mb-3">
            ğŸ“ æ–‡å­—æ•°
          </label>
          <div className="flex gap-3">
            {WORD_COUNTS.map(w => (
              <button
                key={w.value}
                onClick={() => onSelect(w.value)}
                className={`flex-1 glass rounded-xl p-3 text-center border-2 transition-all ${
                  selected === w.value
                    ? 'border-gold bg-gold/10 shadow-lg shadow-gold/5'
                    : 'border-transparent hover:border-white/20'
                }`}
              >
                <div className="text-sm font-bold">{w.label}</div>
                <div className="text-xs text-white/40 mt-1">{w.desc}</div>
              </button>
            ))}
          </div>
        </div>
      );
    }

    function PromptResult({ prompt, onBack }) {
      const [copied, setCopied] = useState(false);

      const handleCopy = () => {
        navigator.clipboard.writeText(prompt).then(() => {
          setCopied(true);
          setTimeout(() => setCopied(false), 2500);
        });
      };

      return (
        <div className="animate-fade-in">
          {/* ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ */}
          <div className="glass rounded-2xl p-5 mb-6 animate-slide-up">
            <h2 className="text-gold font-medium mb-3 text-sm">ğŸ“Œ ä½¿ã„æ–¹</h2>
            <ol className="text-white/60 text-sm space-y-1.5 list-decimal list-inside">
              <li>ä¸‹ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ <span className="text-gold/80 font-medium">ã‚³ãƒ”ãƒ¼</span> ã™ã‚‹</li>
              <li><a href="https://claude.ai" target="_blank" rel="noopener noreferrer" className="text-gold/80 font-medium underline underline-offset-2 hover:text-gold transition-colors">Claude</a> / ChatGPT / Gemini ãªã©ã®AIãƒãƒ£ãƒƒãƒˆã«è²¼ã‚Šä»˜ã‘ã‚‹</li>
              <li>AIãŒæœ€å¾Œã®ä¸€æ–‡ã«å‘ã‹ã£ã¦é€†ç®—ã—ãŸå°èª¬ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ âœ¨</li>
            </ol>
          </div>

          {/* ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º */}
          <div className="glass-light rounded-2xl p-6 md:p-8 mb-6 animate-slide-up" style={{ animationDelay: '0.1s' }}>
            <div className="flex items-center justify-between mb-4">
              <h2 className="text-gold font-medium text-sm">ğŸª¶ ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h2>
              <span className="text-white/30 text-xs">{prompt.length} æ–‡å­—</span>
            </div>
            <div className="prompt-box bg-black/20 rounded-xl p-5 text-white/85 text-sm whitespace-pre-wrap border border-white/5 max-h-[60vh] overflow-y-auto">
              {prompt}
            </div>
          </div>

          {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
          <div className="flex flex-col sm:flex-row gap-3 justify-center animate-slide-up" style={{ animationDelay: '0.2s' }}>
            <button
              onClick={handleCopy}
              className={`px-8 py-4 rounded-2xl text-lg font-bold transition-all duration-300 flex items-center justify-center gap-2 ${
                copied
                  ? 'bg-emerald-500/20 text-emerald-300 border-2 border-emerald-500/30 scale-105'
                  : 'bg-gradient-to-r from-gold to-amber-400 text-ink hover:shadow-lg hover:shadow-gold/25 hover:scale-105 active:scale-95'
              }`}
            >
              {copied ? 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼' : 'ğŸ“‹ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼'}
            </button>
            <a
              href="https://claude.ai"
              target="_blank"
              rel="noopener noreferrer"
              className="px-6 py-4 glass rounded-2xl hover:bg-white/10 transition-all text-white/70 hover:text-white flex items-center justify-center gap-2 text-sm no-underline"
            >
              ğŸ¤– Claude.ai ã‚’é–‹ã
            </a>
            <button
              onClick={onBack}
              className="px-6 py-4 glass rounded-2xl hover:bg-white/10 transition-all text-white/70 hover:text-white flex items-center justify-center gap-2 text-sm"
            >
              âœ¨ æ–°ã—ãä½œã‚‹
            </button>
          </div>
        </div>
      );
    }

    // --- Main App ---
    function App() {
      const [screen, setScreen] = useState('input'); // input | result
      const [lastSentence, setLastSentence] = useState('');
      const [pattern, setPattern] = useState('emotional');
      const [wordCount, setWordCount] = useState(2000);
      const [generatedPrompt, setGeneratedPrompt] = useState('');

      const canGenerate = lastSentence.trim().length > 0;

      const handleGenerate = () => {
        if (!canGenerate) return;
        const prompt = buildPrompt(lastSentence.trim(), pattern, wordCount);
        setGeneratedPrompt(prompt);
        setScreen('result');
      };

      const handleBack = () => {
        setScreen('input');
        setLastSentence('');
        setGeneratedPrompt('');
      };

      const exampleSentences = [
        'ãã—ã¦ã€èª°ã‚‚ã„ãªããªã£ãŸã€‚',
        'ãã‚ŒãŒã€ç§ãŸã¡ã®æœ€å¾Œã®å¤ã ã£ãŸã€‚',
        'ã‚ã®æ—¥ã®ç´„æŸã‚’ã€ã‚ˆã†ã‚„ãæœãŸã›ãŸæ°—ãŒã—ãŸã€‚',
        'ãã®æ‰‹ç´™ã¯ã€ã¾ã é–‹å°ã•ã‚Œã¦ã„ãªã„ã€‚',
        'ã ã‹ã‚‰ç§ã¯ã€ã‚‚ã†æŒ¯ã‚Šè¿”ã‚‰ãªã„ã¨æ±ºã‚ãŸã€‚',
      ];

      return (
        <div className="min-h-screen px-4 py-6 md:px-6">
          <div className="max-w-2xl mx-auto">
            <Header />

            {screen === 'input' && (
              <div>
                {/* æœ€å¾Œã®ä¸€æ–‡å…¥åŠ› */}
                <div className="glass rounded-2xl p-5 mb-6 animate-slide-up">
                  <label className="block text-gold text-sm font-medium mb-2">
                    âœï¸ å°èª¬ã®æœ€å¾Œã®ä¸€æ–‡
                  </label>
                  <textarea
                    value={lastSentence}
                    onChange={e => setLastSentence(e.target.value)}
                    placeholder="ä¾‹: ãã—ã¦ã€èª°ã‚‚ã„ãªããªã£ãŸã€‚"
                    rows={3}
                    className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 font-serif text-lg resize-none"
                  />
                  <div className="mt-3">
                    <p className="text-white/30 text-xs mb-2">ğŸ’¡ ä¾‹æ–‡ã‚’ã‚¿ãƒƒãƒ—ã—ã¦è©¦ã—ã¦ã¿ã‚ˆã†</p>
                    <div className="flex flex-wrap gap-2">
                      {exampleSentences.map((s, i) => (
                        <button
                          key={i}
                          onClick={() => setLastSentence(s)}
                          className="text-xs px-3 py-1.5 glass rounded-full text-white/50 hover:text-white/80 hover:bg-white/10 transition-all"
                        >
                          {s}
                        </button>
                      ))}
                    </div>
                  </div>
                </div>

                <PatternSelector selected={pattern} onSelect={setPattern} />
                <WordCountSelector selected={wordCount} onSelect={setWordCount} />

                {/* ç”Ÿæˆãƒœã‚¿ãƒ³ */}
                <div className="text-center mt-8 animate-slide-up" style={{ animationDelay: '0.3s' }}>
                  <button
                    onClick={handleGenerate}
                    disabled={!canGenerate}
                    className={`px-10 py-4 rounded-2xl text-lg font-bold transition-all duration-300 ${
                      canGenerate
                        ? 'bg-gradient-to-r from-gold to-amber-400 text-ink hover:shadow-lg hover:shadow-gold/25 hover:scale-105 active:scale-95'
                        : 'bg-white/10 text-white/30 cursor-not-allowed'
                    }`}
                  >
                    ğŸª¶ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹
                  </button>
                  {!canGenerate && (
                    <p className="text-white/30 text-xs mt-3">
                      æœ€å¾Œã®ä¸€æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </p>
                  )}
                </div>
              </div>
            )}

            {screen === 'result' && (
              <PromptResult prompt={generatedPrompt} onBack={handleBack} />
            )}

            <footer className="text-center text-white/20 text-xs mt-12 mb-6">
              ä¸€æ–‡é€†ç®—å°èª¬ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼
            </footer>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
